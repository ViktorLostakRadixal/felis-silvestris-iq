<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Felis Silvestris IQ - Cognitive Test</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Screen 1: Setup and Instructions -->
    <div id="setup-screen" class="screen">
        <h1>Felis Silvestris IQ</h1>
        <div class="instructions">
            <h2>Instructions</h2>
            <p>
                Enter the experimental setup details below. The application will attempt to get your current location and check the database connection.
            </p>
        </div>
        <div class="controls">
            <textarea id="setup-input" placeholder="Describe the Experimental Setup (e.g., kitten ID, environment, notes...)" rows="4"></textarea>
            <input type="text" id="location-input" placeholder="Getting location..." readonly>
            <!-- NEW: Status display for health check -->
            <div id="db-status">Checking database connection...</div>
            <button id="prepare-button">Prepare Experiment</button>
        </div>
    </div>

    <!-- Screen 2: QR Code and final start -->
    <div id="qr-code-screen" class="screen hidden">
        <h2>Experiment Prepared</h2>
        <p>Scan the QR code with your recording device. This links your video to the dataset.</p>
        <canvas id="qr-code-canvas"></canvas>
        <p id="session-uuid-display"></p>
        <button id="start-test-button">Start Experiment</button>
    </div>

    <!-- Screen 3: The actual test area -->
    <div id="test-area" class="hidden">
        <!-- The connection status indicator -->
        <div id="status-indicator"></div>
    </div>

    <!-- External library for QR Code generation -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.4.4/build/qrcode.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
